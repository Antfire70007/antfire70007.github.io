!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){return function(o,s){function e(e){if(F)return!0;e=e||window.event,E.timeToIdle&&E.mouseUsed&&!b&&i();for(var t,n,o=(e.target||e.srcElement).getAttribute("class")||"",l=0;l<M.length;l++)(t=M[l]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),F=!0,e=s.features.isOldAndroid?600:30,setTimeout(function(){F=!1},e))}function n(){var e=1===E.getNumItemsFn();e!==I&&(R(p,"ui--one-slide",e),I=e)}function t(){R(w,"share-modal--hidden",O)}function l(){for(var e,t,n,o,l="",r=0;r<E.shareButtons.length;r++)e=E.shareButtons[r],t=E.getImageURLForShare(e),n=E.getPageURLForShare(e),o=E.getTextForShare(e),l+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",E.parseShareButtonOut&&(l=E.parseShareButtonOut(e,l));w.children[0].innerHTML=l,w.children[0].onclick=U}function r(e){for(var t=0;t<E.closeElClasses.length;t++)if(s.hasClass(e,"pswp__"+E.closeElClasses[t]))return!0}function i(){clearTimeout(S),z=0,b&&k.setIdle(!1)}function a(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(S),S=setTimeout(function(){k.setIdle(!0)},E.timeToIdleOutside))}function u(e){C!==e&&(R(_,"preloader--active",!e),C=e)}function D(e){var t,n=e.vGap;!o.likelyTouchDevice||E.mouseUsed||screen.width>E.fitControlsWidth?(t=E.barsSize,E.captionEl&&"auto"===t.bottom?(m||((m=s.createEl("pswp__caption pswp__caption--fake")).appendChild(s.createEl("pswp__caption__center")),p.insertBefore(m,d),s.addClass(p,"pswp__ui--fit")),E.addCaptionHTMLFn(e,m,!0)?(e=m.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function A(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){l=e[n],r=l.className;for(var o=0;o<M.length;o++)i=M[o],-1<r.indexOf("pswp__"+i.name)&&(E[i.option]?(s.removeClass(l,"pswp__element--disabled"),i.onInit&&i.onInit(l)):s.addClass(l,"pswp__element--disabled"))}}e(p.children);var l,r,i,t=s.getChildByClass(p,"pswp__top-bar");t&&e(t.children)}var c,p,d,m,f,h,w,g,b,v,_,C,T,I,E,F,x,S,k=this,K=!1,L=!0,O=!0,P={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},R=function(e,t,n){s[(n?"add":"remove")+"Class"](e,"pswp__"+t)},y=function(){return(O=!O)?(s.removeClass(w,"pswp__share-modal--fade-in"),setTimeout(function(){O&&t()},300)):(t(),setTimeout(function(){O||s.addClass(w,"pswp__share-modal--fade-in")},30)),O||l(),!1},U=function(e){var t=(e=e||window.event).target||e.srcElement;return o.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),O||y(),1))},z=0,M=[{name:"caption",option:"captionEl",onInit:function(e){d=e}},{name:"share-modal",option:"shareEl",onInit:function(e){w=e},onTap:function(){y()}},{name:"button--share",option:"shareEl",onInit:function(e){h=e},onTap:function(){y()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){f=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){_=e}}];k.init=function(){var t;s.extend(o.options,P,!0),E=o.options,p=s.getChildByClass(o.scrollWrap,"pswp__ui"),(v=o.listen)("onVerticalDrag",function(e){L&&e<.95?k.hideControls():!L&&.95<=e&&k.showControls()}),v("onPinchClose",function(e){L&&e<.9?(k.hideControls(),t=!0):t&&!L&&.9<e&&k.showControls()}),v("zoomGestureEnded",function(){(t=!1)&&!L&&k.showControls()}),v("beforeChange",k.update),v("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()!==t?o.zoomTo(t,e,333):o.zoomTo(E.getDoubleTapZoom(!1,o.currItem),e,333)}),v("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),v("bindEvents",function(){s.bind(p,"pswpTap click",e),s.bind(o.scrollWrap,"pswpTap",k.onGlobalTap),o.likelyTouchDevice||s.bind(o.scrollWrap,"mouseover",k.onMouseOver)}),v("unbindEvents",function(){O||y(),x&&clearInterval(x),s.unbind(document,"mouseout",a),s.unbind(document,"mousemove",i),s.unbind(p,"pswpTap click",e),s.unbind(o.scrollWrap,"pswpTap",k.onGlobalTap),s.unbind(o.scrollWrap,"mouseover",k.onMouseOver),c&&(s.unbind(document,c.eventK,k.updateFullscreen),c.isFullscreen()&&(E.hideAnimationDuration=0,c.exit()),c=null)}),v("destroy",function(){E.captionEl&&(m&&p.removeChild(m),s.removeClass(d,"pswp__caption--empty")),w&&(w.children[0].onclick=null),s.removeClass(p,"pswp__ui--over-close"),s.addClass(p,"pswp__ui--hidden"),k.setIdle(!1)}),E.showAnimationDuration||s.removeClass(p,"pswp__ui--hidden"),v("initialZoomIn",function(){E.showAnimationDuration&&s.removeClass(p,"pswp__ui--hidden")}),v("initialZoomOut",function(){s.addClass(p,"pswp__ui--hidden")}),v("parseVerticalMargin",D),A(),E.shareEl&&h&&w&&(O=!0),n(),E.timeToIdle&&v("mouseUsed",function(){s.bind(document,"mousemove",i),s.bind(document,"mouseout",a),x=setInterval(function(){2===++z&&k.setIdle(!0)},E.timeToIdle/2)}),E.fullscreenEl&&!s.features.isOldAndroid&&((c=c||k.getFullscreenAPI())?(s.bind(document,c.eventK,k.updateFullscreen),k.updateFullscreen(),s.addClass(o.template,"pswp--supports-fs")):s.removeClass(o.template,"pswp--supports-fs")),E.preloaderEl&&(u(!0),v("beforeChange",function(){clearTimeout(T),T=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||u(!1):u(!0)},E.loadingIndicatorDelay)}),v("imageLoadComplete",function(e,t){o.currItem===t&&u(!0)}))},k.setIdle=function(e){R(p,"ui--idle",b=e)},k.update=function(){K=!(!L||!o.currItem||(k.updateIndexIndicator(),E.captionEl&&(E.addCaptionHTMLFn(o.currItem,d),R(d,"caption--empty",!o.currItem.title)),0)),O||y(),n()},k.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,s.getScrollY())},50),s[(c.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},k.updateIndexIndicator=function(){E.counterEl&&(f.innerHTML=o.getCurrentIndex()+1+E.indexIndicatorSep+E.getNumItemsFn())},k.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!F)if(e.detail&&"mouse"===e.detail.pointerType)r(t)?o.close():s.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?E.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint));else if(E.tapToToggleControls&&(L?k.hideControls():k.showControls()),E.tapToClose&&(s.hasClass(t,"pswp__img")||r(t)))return void o.close()},k.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;R(p,"ui--over-close",r(e))},k.hideControls=function(){s.addClass(p,"pswp__ui--hidden"),L=!1},k.showControls=function(){L=!0,K||k.update(),s.removeClass(p,"pswp__ui--hidden")},k.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},k.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return g=E.closeOnScroll,E.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?o.template[this.enterK]():void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return E.closeOnScroll=g,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}});